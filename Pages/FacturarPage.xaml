<Page x:Class="DentalMVP.Pages.FacturarPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Facturar">
    <Grid Margin="8">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0 0 0 8">
            <ComboBox x:Name="cbPaciente" Width="260" Margin="4" DisplayMemberPath="FullName" SelectedValuePath="Id"/>
            <ComboBox x:Name="cbServicio" Width="260" Margin="4" DisplayMemberPath="Name" SelectedValuePath="Id"/>
            <TextBox x:Name="txtCant" Width="80" Margin="4" Text="1"/>
            <Button Content="Agregar lÃ­nea" Click="AddLine_Click" Margin="4"/>
        </StackPanel>

        <DataGrid x:Name="dg" Grid.Row="1" AutoGenerateColumns="False" CanUserAddRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Servicio" Binding="{Binding Service.Name}" Width="*"/>
                <DataGridTextColumn Header="Cant" Binding="{Binding Quantity}" Width="80"/>
                <DataGridTextColumn Header="Precio" Binding="{Binding UnitPrice}" Width="120"/>
                <DataGridTextColumn Header="ITBIS %" Binding="{Binding ItbisPct}" Width="80"/>
                <DataGridTextColumn Header="Monto" Binding="{Binding LineTotal}" Width="120"/>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 8 0 0">
            <TextBlock Text="Subtotal:" VerticalAlignment="Center" Margin="8"/>
            <TextBlock x:Name="tbSub" Width="100"/>
            <TextBlock Text="ITBIS:" VerticalAlignment="Center" Margin="8"/>
            <TextBlock x:Name="tbItbis" Width="100"/>
            <TextBlock Text="Total:" VerticalAlignment="Center" Margin="8"/>
            <TextBlock x:Name="tbTotal" Width="120" FontWeight="Bold"/>
            <ComboBox x:Name="cbPago" Width="140" Margin="8"/>
            <TextBox x:Name="txtPaga" Width="120" Margin="4"/>
            <Button Content="Guardar Factura" Click="SaveInvoice_Click" Margin="8"/>
        </StackPanel>
    </Grid>
</Page>
